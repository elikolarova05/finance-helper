<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="../css/site-map-style.css">
  <link rel="stylesheet" href="../css/style.css">
  <title>Карта на сайта</title>
  <link rel="icon" href="../resources/icon.ico">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
  <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  <script src="../javascript/loadPage.js"></script>
</head>

<body>
  <div id="navbar"></div>
  <div id="map" class="d-flex flex-wrap justify-content-evenly mt-3"></div>
  <script>
    loadPage('navbar', 'navbar')

    let titles = [
      { "Начало": [] },
      { "Калкулатори": ["авто-мото", "заеми", "инвестиции", "спестявания", "студенти", "кредити"] },
      { "Полезни съвети": [] },
      { "Контакти": [] }
    ];
    let pages = [
      { "index.html": [] },
      {
        "calculator-menu.html": ["calculator-template.html?type=auto",
          "calculator-template.html?type=loan",
          "calculator-template.html?type=investments",
          "calculator-template.html?type=savings",
          "calculator-template.html?type=student",
          "calculator-template.html?type=credits"]
      },
      { "advices.html": [] },
      { "contacts.html": [] }
    ];

    titles.forEach((obj) => {
      
      for (const [title, subpages] of Object.entries(obj)) {
        let index = titles.findIndex(item => Object.keys(item)[0] === title);
        let main = createCard(title, "main-card", Object.keys(pages[index]));

        let column = document.createElement("div");
        column.classList.add("card-column");
        document.getElementById("map").appendChild(column);
        column.appendChild(main);
        subpages.forEach((subpage, subpageIndex) => {
          column.appendChild(createCard(subpage, "sub-card", pages[index][ Object.keys(pages[index])][subpageIndex]));
        })
      };
    });
    function createCard(text, className, link) {
      let a = document.createElement("a");
      a.href = link;
      a.appendChild(document.createTextNode(text));
      a.classList.add(className);

      return a;
    }

  </script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
    crossorigin="anonymous"></script>
</body>

</html>